module "eks" {
  source  = "terraform-aws-modules/eks/aws"
  version = "20.8.3"

  cluster_name    = "${var.environment}-${var.cluster_name}"
  cluster_version = var.eks_version
  subnets         = concat(var.public_subnet_ids, var.private_subnet_ids)
  vpc_id          = var.vpc_id

  enable_irsa       = true
  manage_aws_auth   = true

  aws_auth_users = [
    {
      userarn  = "arn:aws:iam::381492269344:root"
      username = "root"
      groups   = ["system:masters"]
    }
  ]
}
